(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t,n){},121:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n.n(a),s=n(13),o=n.n(s),c=(n(119),n(16)),l=n.n(c),u=n(27),d=(n(121),n(104)),b=n(178),j=Object(d.a)({colors:{main:"#3f51b5",error:"#f44336",success:"#4caf50",like:"rgb(219, 86, 91)"},typography:{fontFamily:'"Montserrat", "Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500}}),m=function(e){return Object(r.jsx)(b.a,{theme:j,children:e.children})},p=n(3),f=n(8),O=n(179),x=n(148),h=n(181),g=n(18),v=Object(O.a)((function(){return{entry__title:{fontSize:"2.5rem"},entry__actions:{marginTop:"50px",textAlign:"center"}}})),w=function(){var e=Object(g.g)(),t=v(),n=Object(a.useState)({title:!1,actions:!1}),i=Object(f.a)(n,2),s=i[0],o=i[1];Object(a.useEffect)((function(){setTimeout((function(){o((function(e){return Object(p.a)(Object(p.a)({},e),{},{title:!0})}))}),500),setTimeout((function(){o((function(e){return Object(p.a)(Object(p.a)({},e),{},{actions:!0})}))}),1e3)}),[]);return Object(r.jsxs)("div",{className:t.entry__content,children:[Object(r.jsx)(x.a,{in:s.title,timeout:{enter:2e3,exit:500},children:Object(r.jsx)("div",{className:t.entry__title,children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 Andrewgram"})}),Object(r.jsx)("div",{className:t.entry__actions,children:Object(r.jsx)(x.a,{in:s.actions,timeout:{enter:1500,exit:500},children:Object(r.jsx)(h.a,{onClick:function(){setTimeout((function(){o((function(e){return Object(p.a)(Object(p.a)({},e),{},{title:!1})}))}),0),setTimeout((function(){o((function(e){return Object(p.a)(Object(p.a)({},e),{},{actions:!1})}))}),0),setTimeout((function(){e.push("/auth")}),500)},variant:"contained",color:"primary",children:"\u0412\u043e\u0439\u0442\u0438"})})})]})},_=Object(O.a)((function(){return{"entry-page":{width:"100%",height:"90vh",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}})),y=function(){var e=_();return Object(r.jsx)("div",{className:e["entry-page"],children:Object(r.jsx)(w,{})})},k=n(105),N=n(97),C=n.n(N),S=n(28),L=n(186),T=n(201),P=n(185),E=n(60),A=n(200),I=n(15),R=n(199);function W(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var F=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1];return{loading:n,request:Object(a.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,i,s,o,c,u,d=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:"get",a=d.length>2&&void 0!==d[2]?d[2]:{},i=d.length>3&&void 0!==d[3]?d[3]:{},r(!0),e.prev=4,s=W("XSRF-TOKEN"),o={method:n,headers:Object(p.a)(Object(p.a)({},i),{},{"Content-Type":"application/json","x-csrf-token":s})},"get"===n){e.next=11;break}return e.next=10,JSON.stringify(a);case 10:o.body=e.sent;case 11:return e.next=13,fetch(t,Object(p.a)({},o));case 13:return c=e.sent,e.next=16,c.json();case 16:if(u=e.sent,c.ok){e.next=19;break}throw new Error(u.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 19:return e.abrupt("return",u);case 22:throw e.prev=22,e.t0=e.catch(4),new Error(e.t0.message);case 25:return e.prev=25,r(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),[])}},D=n(9),z="AUTH_USER",B="LOGOUT_USER",U="SET_USER_AVATAR",G="TOGGLE_SUBS",M="SET_SUBSCRIPTIONS",q="SET_RECOMMENDED_PROFILES",H="TOGGLE_LOADING",Z=function(){return{type:H}},$=Object(O.a)((function(e){return{inputs:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},input:{width:"60%",marginTop:"20px"},"form-actions":{width:"100%",maxWidth:"200px",margin:"2rem auto 0",display:"flex",justifyContent:"center",textAlign:"center",flexDirection:"column"},"form-title":{textAlign:"center",fontSize:"1.5rem"},form:{"& .MuiFormHelperText-root\t":{fontSize:"1rem"}},"login-error":{color:e.colors.error,fontWeight:"bold",textAlign:"center"}}})),J=function(e){var t=Object(a.useState)({login:!1,password:!1}),n=Object(f.a)(t,2),i=n[0],s=n[1],o=Object(a.useState)({login:"",password:""}),c=Object(f.a)(o,2),d=c[0],b=c[1],j=Object(a.useState)({login:"",password:""}),m=Object(f.a)(j,2),O=m[0],x=m[1],v=Object(a.useState)(!1),w=Object(f.a)(v,2),_=w[0],y=w[1],k=Object(a.useState)(""),N=Object(f.a)(k,2),C=N[0],S=N[1],L=F(),T=L.loading,P=L.request,E=Object(g.g)(),A=Object(D.b)(),W=e.setIsAppear,B=function(e){return i[e.target.name]&&(s((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e.target.name,!1))})),b((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e.target.name,""))}))),e.target.value||(s((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e.target.name,!0))})),b((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e.target.name,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"))}))),x((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e.target.name,e.target.value))}))},U=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!i.login&&!i.password){e.next=5;break}if(O.login&&O.password){e.next=5;break}return e.abrupt("return");case 5:for(a in n=!0,r=function(e){O[e]||(s((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e,!0))})),b((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"))})),n=!1)},O)r(a);if(n){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,P("/auth/login","post",O);case 12:if((o=e.sent).userInfo){e.next=17;break}throw new Error("\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u0442\u0443");case 17:_&&y(!1),W(!1),setTimeout((function(){E.push("/app")}),700);case 20:A((u=o,{type:z,payload:Object(p.a)({},u)})),A((l=o.userInfo.subscriptions,{type:M,payload:l||[]})),A((c=o.userInfo.recommended,{type:q,payload:c||[]})),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(1),e.t0.message.toLowerCase().includes("\u043f\u0430\u0440\u043e\u043b\u044c")?s((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:!0})})):e.t0.message.toLowerCase().includes("\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")&&s((function(e){return Object(p.a)(Object(p.a)({},e),{},{login:!0})})),y(!0),S(e.t0.message);case 30:case"end":return e.stop()}var c,l,u}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}(),G=$();return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:G["form-title"],children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(r.jsxs)("form",{className:G.form,children:[Object(r.jsxs)("div",{className:G.inputs,children:[Object(r.jsx)(R.a,{className:G.input,error:i.login,id:"filled-error-helper-text",label:"\u041b\u043e\u0433\u0438\u043d",onChange:B,helperText:d.login,variant:"filled",name:"login",value:O.login}),Object(r.jsx)(R.a,{className:G.input,error:i.password,type:"password",id:"filled-error-helper-text1",label:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:B,helperText:d.password,variant:"filled",name:"password",value:O.password})]}),_&&Object(r.jsx)("p",{className:G["login-error"],children:C}),Object(r.jsxs)("div",{className:G["form-actions"],children:[Object(r.jsx)(h.a,{onClick:U,disabled:T,type:"submit",variant:"contained",color:"primary",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(r.jsx)(h.a,{onClick:function(){W(!1),setTimeout((function(){E.push("/auth/reset")}),700)},variant:"contained",style:{marginTop:"20px"},disabled:T,color:"primary",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})},K=Object(O.a)((function(e){return{inputs:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},input:{width:"60%",marginTop:"20px"},"form-actions":{width:"100%",marginTop:"2rem",display:"flex",justifyContent:"center"},"form-title":{textAlign:"center",fontSize:"1.5rem"},form:{"& .MuiFormHelperText-root\t":{fontSize:"1rem"}},"register-error":{color:e.colors.error,fontWeight:"bold",textAlign:"center"},"register-success":{color:e.colors.success,textAlign:"center",fontWeight:"bold",fontSize:"1.2rem"}}})),X=function(){var e=Object(a.useState)({login:!1,password:!1,name:!1,email:!1,rePassword:!1}),t=Object(f.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)({login:"",password:"",name:"",email:"",rePassword:""}),o=Object(f.a)(s,2),c=o[0],d=o[1],b=Object(a.useState)({login:"",password:"",name:"",email:"",rePassword:""}),j=Object(f.a)(b,2),m=j[0],O=j[1],x=F(),g=x.loading,v=x.request,w=Object(a.useState)(!1),_=Object(f.a)(w,2),y=_[0],k=_[1],N=Object(a.useState)(""),C=Object(f.a)(N,2),S=C[0],L=C[1],T=Object(a.useState)(!1),P=Object(f.a)(T,2),E=P[0],A=P[1],W=function(e,t,n){return e.value.length<t?(i((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e.name,!0))})),d((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e.name,n))})),!0):e.value.length>=t?(i((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e.name,!1))})),d((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e.name,""))})),!1):void 0},D=function(e){var t,r=e.target;return"login"===r.name&&W(r,5,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),"password"===r.name&&W(r,7,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 7 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),"email"===r.name&&(t=r.value,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())?(i((function(e){return Object(p.a)(Object(p.a)({},e),{},{email:!1})})),d((function(e){return Object(p.a)(Object(p.a)({},e),{},{email:""})}))):(i((function(e){return Object(p.a)(Object(p.a)({},e),{},{email:!0})})),d((function(e){return Object(p.a)(Object(p.a)({},e),{},{email:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email"})})))),"rePassword"===r.name&&(r.value!==m.password?(i((function(e){return Object(p.a)(Object(p.a)({},e),{},{rePassword:!0})})),d((function(e){return Object(p.a)(Object(p.a)({},e),{},{rePassword:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"})}))):n.rePassword&&(i((function(e){return Object(p.a)(Object(p.a)({},e),{},{rePassword:!1})})),d((function(e){return Object(p.a)(Object(p.a)({},e),{},{rePassword:""})})))),O((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(I.a)({},r.name,r.value))}))},z=function(){var e=Object(u.a)(l.a.mark((function e(t){var r,a,s,o,c,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),e.prev=1,r=!0,a=function(e){if("name"===e)return"continue";m[e]||(r=!1,i((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e,!0))})),d((function(t){return Object(p.a)(Object(p.a)({},t),{},Object(I.a)({},e,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"))})))},e.t0=l.a.keys(m);case 5:if((e.t1=e.t0()).done){e.next=12;break}if(s=e.t1.value,"continue"!==a(s)){e.next=10;break}return e.abrupt("continue",5);case 10:e.next=5;break;case 12:if(r){e.next=14;break}return e.abrupt("return");case 14:e.t2=l.a.keys(n);case 15:if((e.t3=e.t2()).done){e.next=23;break}if("name"!==(o=e.t3.value)){e.next=19;break}return e.abrupt("continue",15);case 19:if(!n[o]){e.next=21;break}return e.abrupt("return");case 21:e.next=15;break;case 23:return delete(c=Object(p.a)({},m)).rePassword,u=Object(p.a)({},c),e.next=28,v("/auth/register","post",u);case 28:if(e.sent.user){e.next=33;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438");case 33:y&&k(!1),O({login:"",name:"",email:"",password:"",rePassword:""}),A(!0);case 36:e.next=43;break;case 38:e.prev=38,e.t4=e.catch(1),e.t4.message.toLowerCase().includes("\u043b\u043e\u0433\u0438\u043d")?i((function(e){return Object(p.a)(Object(p.a)({},e),{},{login:!0})})):e.t4.message.includes("email")?i((function(e){return Object(p.a)(Object(p.a)({},e),{},{email:!0})})):(e.t4.message.toLowerCase().includes("\u043f\u0430\u0440\u043e\u043b\u044c")||e.t4.message.toLowerCase().includes("\u043f\u0430\u0440\u043e\u043b\u0438"))&&i((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:!0,rePassword:!0})})),k(!0),L(e.t4.message);case 43:case"end":return e.stop()}}),e,null,[[1,38]])})));return function(t){return e.apply(this,arguments)}}(),B=K();return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:B["form-title"],children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(r.jsxs)("form",{className:B.form,children:[Object(r.jsxs)("div",{className:B.inputs,children:[Object(r.jsx)(R.a,{className:B.input,error:n.login,id:"filled-error-helper-text2",label:"\u041b\u043e\u0433\u0438\u043d",onChange:D,helperText:c.login,variant:"filled",name:"login",value:m.login}),Object(r.jsx)(R.a,{className:B.input,error:n.name,id:"filled-error-helper-text5",label:"\u0418\u043c\u044f",onChange:D,helperText:c.name,variant:"filled",name:"name",value:m.name}),Object(r.jsx)(R.a,{className:B.input,error:n.email,id:"filled-error-helper-text6",label:"Email",onChange:D,helperText:c.email,variant:"filled",name:"email",value:m.email}),Object(r.jsx)(R.a,{className:B.input,error:n.password,type:"password",id:"filled-error-helper-text3",label:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:D,helperText:c.password,variant:"filled",name:"password",value:m.password}),Object(r.jsx)(R.a,{className:B.input,error:n.rePassword,type:"password",id:"filled-error-helper-text4",label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0435\u0449\u0451 \u0440\u0430\u0437",onChange:D,helperText:c.rePassword,variant:"filled",name:"rePassword",value:m.rePassword})]}),y&&Object(r.jsx)("p",{className:B["register-error"],children:S}),E&&Object(r.jsx)("p",{className:B["register-success"],children:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c"}),Object(r.jsx)("div",{className:B["form-actions"],children:Object(r.jsx)(h.a,{onClick:z,disabled:g,type:"submit",variant:"contained",color:"primary",children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0432\u0430\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})]})},Y=n(187);function V(e){var t=e.children,n=e.value,a=e.index,i=Object(k.a)(e,["children","value","index"]);return Object(r.jsx)("div",Object(p.a)(Object(p.a)({role:"tabpanel",hidden:n!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},i),{},{children:n===a&&Object(r.jsx)(A.a,{p:3,children:Object(r.jsx)(E.a,{children:t})})}))}function Q(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}function ee(e){return Object(r.jsx)(P.a,Object(p.a)({component:"a",onClick:function(e){e.preventDefault()}},e))}function te(e){var t=e.setIsAppear,n=Object(S.a)(),a=i.a.useState(0),s=Object(f.a)(a,2),o=s[0],c=s[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(L.a,{position:"static",color:"default",children:Object(r.jsxs)(T.a,{value:o,onChange:function(e,t){c(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"full width tabs example",children:[Object(r.jsx)(ee,Object(p.a)({label:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},Q(0))),Object(r.jsx)(ee,Object(p.a)({label:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},Q(1)))]})}),Object(r.jsxs)(C.a,{axis:o?"x":"x-reverse",index:o,onChangeIndex:function(e){c(e)},children:[Object(r.jsx)(V,{value:o,index:0,dir:n.direction,children:Object(r.jsx)(J,{setIsAppear:t})}),Object(r.jsx)(V,{value:o,index:1,dir:n.direction,children:Object(r.jsx)(X,{setIsAppear:t})})]})]})}var ne=Object(O.a)((function(e){return{"auth-page":{margin:"0 auto",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},"auth-page__auth-block":{width:"100%",maxWidth:"700px",boxSizing:"border-box",borderRadius:"20px",paddingTop:"3rem"}}})),re=function(){var e=ne(),t=Object(a.useState)(!1),n=Object(f.a)(t,2),i=n[0],s=n[1];return Object(a.useEffect)((function(){s(!0)}),[]),Object(r.jsx)(Y.a,{in:i,timeout:{enter:1e3,exit:500},children:Object(r.jsx)("div",{className:e["auth-page"],children:Object(r.jsx)("div",{className:e["auth-page__auth-block"],children:Object(r.jsx)(te,{setIsAppear:s})})})})},ae=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(re,{})})},ie=n(196),se=n(194),oe=n(195),ce=n(203),le=n(197),ue=n(198),de=n(188),be=n(19),je=Object(O.a)((function(e){return{comments:{marginLeft:"1rem"},"show-all-comment-btn":{marginTop:"5px",paddingLeft:0,"&:hover":{backgroundColor:"white"}},comment:{"& a":{color:"black",fontWeight:"bold",marginRight:"0.5rem",textDecoration:"none",transition:".3s","&:hover":{textDecoration:"underline"}},"&:last-of-type":{marginBottom:"0"}}}})),me=function(e){var t=e.comments,n=Object(a.useState)(!1),i=Object(f.a)(n,2),s=i[0],o=i[1],c=je();return Object(r.jsx)("div",{className:c.comments,children:t.length>1?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{className:c.comment,children:[Object(r.jsx)(be.b,{to:"/profile/"+t[0].owner,children:t[0].owner}),Object(r.jsx)("span",{children:t[0].text})]}),Object(r.jsx)(de.a,{mountOnEnter:!0,unmountOnExit:!0,in:s,children:t.map((function(e,t){if(t)return Object(r.jsxs)("p",{className:c.comment,children:[Object(r.jsx)(be.b,{to:"/profile/"+e.owner,children:e.owner}),Object(r.jsx)("span",{children:e.text})]},e._id)}))}),Object(r.jsx)(h.a,{disableRipple:!0,className:c["show-all-comment-btn"],onClick:function(){return o((function(e){return!e}))},children:s?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 (".concat(t.length-1,")")})]}):t.map((function(e){return Object(r.jsxs)("p",{className:c.comment,children:[Object(r.jsx)(be.b,{to:"/profile/"+e.owner,children:e.owner}),Object(r.jsx)("span",{children:e.text})]},e.owner)}))})},pe="TOGGLE_LIKE_POST",fe="TOGGLE_LIKE_POST_LOADING",Oe="TOGGLE_COMMENT_LOADING",xe="WRITE_NEW_COMMENT",he="SET_USER_POSTS",ge="ADD_USER_POST",ve="TOGGLE_ALL_POST_LOADING",we="SET_ALL_POSTS",_e=function(e,t,n){return{type:pe,payload:{id:e,likeOwner:t,isUserPost:n}}},ye=function(e,t){return{type:he,payload:{posts:e,login:t}}},ke=function(){return{type:fe}},Ne=function(){return{type:Oe}},Ce=function(){return{type:ve}},Se=n(202),Le=n(189),Te=n(72),Pe=n.n(Te),Ee=Object(O.a)((function(e){return{likes:{margin:"0 0 0 1rem",fontWeight:"bold","&:hover":{cursor:"pointer"}},modal:{display:"flex",alignItems:"center",justifyContent:"center"},"all-likes":{minWidth:"250px",boxSizing:"border-box",backgroundColor:"white",borderRadius:"10px",boxShadow:e.shadows[5],padding:"1rem 0","&:focus":{outline:"none"}},"all-likes__list":{maxHeight:"12rem",overflowX:"hidden",padding:"0 2rem"},"all-likes__title":{textAlign:"center",fontWeight:"bold",position:"sticky",paddingBottom:"1rem",top:0,borderBottom:"2px solid black"},"all-likes__close-btn":{position:"absolute",top:0,right:"1rem","&:hover":{cursor:"pointer"}},"@media (min-width: 600px)":{"all-likes":{minWidth:"400px"}}}})),Ae=function(e){var t=e.likes,n=Ee(),a=i.a.useState(!1),s=Object(f.a)(a,2),o=s[0],c=s[1],l=function(){c(!1)};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{onClick:function(){c(!0)},className:n.likes,children:[t.length,' \u043e\u0442\u043c\u0435\u0442\u043e\u043a "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"']}),Object(r.jsx)(Se.a,{disableAutoFocus:!0,disableEnforceFocus:!0,className:n.modal,open:o,onClose:l,closeAfterTransition:!0,BackdropComponent:Le.a,BackdropProps:{timeout:500},children:Object(r.jsx)(x.a,{in:o,children:Object(r.jsxs)("div",{className:n["all-likes"],children:[Object(r.jsxs)("div",{className:n["all-likes__title"],children:['\u041e\u0442\u043c\u0435\u0442\u043a\u0438 "\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"',Object(r.jsx)(Pe.a,{onClick:l,className:n["all-likes__close-btn"]})]}),Object(r.jsx)("div",{className:n["all-likes__list"],children:t.map((function(e,t){return Object(r.jsx)(be.b,{style:{textDecoration:"none",marginTop:"1rem",display:"block",fontWeight:"bold",color:"inherit"},to:"/profile/"+e.owner,children:e.owner},t)}))})]})})})]})},Ie=n(190),Re=n(99),We=n.n(Re),Fe=n(100),De=n.n(Fe),ze=n(101),Be=n.n(ze),Ue=n(102),Ge=n.n(Ue),Me=function(e){return e.posts.posts},qe=function(e){return e.posts.isLoadingAllPosts},He=function(e){return e.posts.userPosts},Ze=function(e){return e.posts.isLoadedUserPosts},$e=function(e){return e.posts.isLikedPost},Je=function(e){return e.posts.isCommentPost},Ke=Object(O.a)((function(e){return{like:{},"like-active":{color:e.colors.like}}})),Xe=function(e){var t=e.isLoading,n=e.isLiked,a=e.toggleLike,i=e.isComment,s=e.toggleComment,o=Object(D.c)($e),c=Ke();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ie.a,{disabled:o,onClick:a,"aria-label":"add to favorites",children:n?Object(r.jsx)(We.a,{className:c["like-active"]}):Object(r.jsx)(De.a,{className:c.like})}),Object(r.jsx)(Ie.a,{disabled:t,onClick:s,"aria-label":"add comment",children:i?Object(r.jsx)(Be.a,{color:"action"}):Object(r.jsx)(Ge.a,{})})]})},Ye=n(191),Ve=n(184),Qe=n(183),et=n(192),tt=n(193),nt=Object(O.a)((function(e){return{"new-comment":{position:"relative"},"new-comment-loader":{position:"absolute",top:0,right:0,left:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},"new-comment-field":{marginTop:"0.5rem",flexWrap:"wrap"},"new-comment-input":{padding:"1rem",boxSizing:"border-box"},"comment-btn":{"&:hover":{backgroundColor:"rgba(0,0,0,0)"}},"@media (min-width: 600px)":{"new-comment-input":{width:"100%",boxSizing:"border-box",marginLeft:"0.5rem"},"new-comment-field":{flexWrap:"nowrap"}}}})),rt=i.a.forwardRef((function(e,t){var n=e.isLoading,i=e.loadComment,s=e.avatar,o=Object(a.useState)(""),c=Object(f.a)(o,2),l=c[0],u=c[1],d=Object(D.c)(Je),b=nt();return Object(r.jsxs)("div",{className:b["new-comment"],ref:t,children:[Object(r.jsxs)(Ye.a,{container:!0,className:b["new-comment-field"],spacing:1,alignItems:"flex-end",children:[Object(r.jsx)(Ye.a,{item:!0,children:Object(r.jsx)(h.a,{disabled:n,className:b["comment-btn"],disableRipple:!0,onClick:function(){return alert("hello")},children:Object(r.jsx)(ce.a,{alt:"Avatar",src:"/"+s})})}),Object(r.jsx)(Ye.a,{className:b["new-comment-input"],item:!0,children:Object(r.jsx)(Ve.a,{fullWidth:!0,variant:"outlined",children:Object(r.jsx)(Qe.a,{disabled:n,variant:"outlined",value:l,onChange:function(e){u(e.target.value)},multiline:!0,style:{width:"100%"},id:"filled-adornment-password",placeholder:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439...",endAdornment:Object(r.jsx)(et.a,{position:"end",children:Object(r.jsx)(h.a,{disabled:d,onClick:function(){i(l)},className:b["comment-btn"],disableRipple:!0,children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})})})})}),Object(r.jsx)(Ye.a,{item:!0})]}),n&&Object(r.jsx)("div",{className:b["new-comment-loader"],children:Object(r.jsx)(tt.a,{})})]})})),at=function(e){return e.user.isAuth},it=function(e){return e.user.userInfo||{login:"andrew"}},st=Object(O.a)((function(e,t){return{post:{width:"100%",marginBottom:function(e){return!0===e.isModal?"":"2rem"},border:"1px solid rgb(219, 219, 219)",borderRadius:"3px"},post__profile__name:{fontWeight:"bold",textDecoration:"none",color:"inherit","&:hover":{cursor:"pointer"}},media:{maxHeight:"60vh",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center","& img":{width:"100%",height:"100%"}},"post-info":{margin:"1rem 0 0 1rem","& a":{textDecoration:"none",color:"inherit",fontWeight:"bold",marginRight:".3rem"}},"post-line":{height:"3px",margin:"1rem 0 1rem 1rem",backgroundColor:"rgb(219, 219, 219)"}}})),ot=function(e){var t=e.setModalInfo,n=(e.handleClose,e.info),i=e.isUserPost,s=void 0!==i&&i,o=e.loadingPost,c=void 0!==o&&o,l=n.isLiked,u=n.id,d=n.imgSrc,b=n.likes,j=n.text,m=n.comments,O=n.ownerLogin,x=n.avatar,h=void 0===x?"":x,g=Object(a.useState)(!1),v=Object(f.a)(g,2),w=v[0],_=v[1],y=Object(a.useState)("right"),k=Object(f.a)(y,2),N=k[0],C=k[1],S=Object(a.useState)(!1),L=Object(f.a)(S,2),T=L[0],P=(L[1],st({isModal:!!t})),E=Object(D.b)(),A=Object(D.c)(it),I=F().request,R=function(){E(ke()),I("/post/like","post",{id:u,likerLogin:A.login}).then((function(e){s&&t((function(e){return Object(p.a)(Object(p.a)({},e),{},{isLiked:!e.isLiked})})),E(_e(u,A.login,s))})).finally((function(){return E(ke())}))},W=function(e){var t=e.target.dataset;"post"===t.type&&t.info&&R()};return Object(a.useEffect)((function(){if(s)return document.addEventListener("dblclick",W),function(){document.removeEventListener("dblclick",W)}}),[]),Object(r.jsxs)(se.a,{className:P.post,children:[Object(r.jsx)(oe.a,{avatar:c?Object(r.jsx)(ie.a,{animation:"wave",variant:"circle",width:40,height:40}):Object(r.jsx)(ce.a,{alt:j,src:"/"+h}),title:c?Object(r.jsx)(ie.a,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}):Object(r.jsx)(be.b,{className:P.post__profile__name,to:"/profile/"+O,children:O})}),c?Object(r.jsx)(ie.a,{animation:"wave",variant:"rect",className:P.media}):Object(r.jsx)("div",{className:P.media,children:Object(r.jsx)(le.a,{component:"img",title:"Ted talk",src:"/"+d,"data-type":"post","data-info":u})}),Object(r.jsx)(ue.a,{children:c?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ie.a,{animation:"wave",height:10,style:{marginBottom:6}}),Object(r.jsx)(ie.a,{animation:"wave",height:10,width:"80%"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Xe,{isLoading:T,isComment:w,isLiked:l,toggleLike:R,toggleComment:function(){_((function(e){return!e}))}}),Object(r.jsx)(Ae,{likes:b}),Object(r.jsxs)("div",{className:P["post-info"],children:[Object(r.jsx)(be.b,{to:{pathname:"/profile/"+O,state:{fromNotifications:!1}},children:O}),j]}),Object(r.jsx)("div",{className:P["post-line"]}),Object(r.jsx)(me,{comments:m}),Object(r.jsx)(Y.a,{in:w,direction:N,mountOnEnter:!0,unmountOnExit:!0,children:Object(r.jsx)(rt,{avatar:A.avatar,login:O,loadComment:function(e){E(Ne()),I("/post/comment","post",{id:u,owner:A.login,comment:e}).then((function(e){E(function(e,t,n){return{type:xe,payload:{isUserPost:e,postId:t,comment:n}}}(s,u,Object(p.a)({},e.comment))),C("left"),_(!1),setTimeout((function(){C("right")}),500)})).finally((function(){return E(Ne())}))},isLoading:T})})]})})]})},ct=function(){var e=Object(D.c)(Me),t=Object(D.b)(),n=Object(D.c)(it),i=F().request,s=function(e){var r=e.target.dataset;"post"===r.type&&r.info&&(t(ke()),i("/post/like","post",{id:r.info,likerLogin:n.login}).then((function(e){t(_e(r.info,n.login))})).finally((function(){return t(ke())})))};return Object(a.useEffect)((function(){return document.addEventListener("dblclick",s),function(){document.removeEventListener("dblclick",s)}}),[]),Object(r.jsxs)("div",{children:[e.map((function(e,t){return Object(r.jsx)(ot,{info:{isLiked:!!e.isLiked,likes:e.likes,comments:e.comments,id:e._id,avatar:e.avatar,imgSrc:e.imageSrc,ownerLogin:e.ownerLogin}},t)})),!e.length&&Object(r.jsx)("div",{style:{fontSize:"2rem",textAlign:"center",textTransform:"uppercase",marginTop:"5rem"},children:"\u043f\u043e\u0441\u0442\u043e\u0432 \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u043d\u0435\u0442\u0443"})]})},lt=Object(O.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Montserrat"},"new-avatar":{fontFamily:"Montserrat",minWidth:"500px",boxSizing:"border-box",backgroundColor:"white",borderRadius:"10px",boxShadow:e.shadows[5],position:"relative",padding:"3rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","&:focus":{outline:"none"}},"new-avatar__file-error":{marginTop:"1rem",textAlign:"center",color:e.colors.error,fontWeight:"bold"},"new-avatar__load-btn":{marginTop:"2rem"}}})),ut=function(e){var t=e.open,n=e.login,i=lt(),s=Object(a.useState)(""),o=Object(f.a)(s,2),c=o[0],d=o[1],b=Object(a.useState)({isError:!1,text:""}),j=Object(f.a)(b,2),m=j[0],p=j[1],O=Object(a.useState)(""),x=Object(f.a)(O,2),g=x[0],v=x[1],w=Object(D.b)(),_=Object(a.useRef)(),y=function(){var e=Object(u.a)(l.a.mark((function e(){var r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new FormData).append("avatar",_.current.files[0]),r.set("user",n),e.next=6,fetch("/user/avatar",{method:"post",body:r});case 6:return a=e.sent,e.next=9,a.json();case 9:(i=e.sent).path?(w((s=i.path,{type:U,payload:s})),t(!1)):p({isError:!0,text:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),p({isError:!0,text:"C\u0435\u0440\u0432\u0435\u0440\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435"});case 16:case"end":return e.stop()}var s}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(Se.a,{disableAutoFocus:!0,disableEnforceFocus:!0,className:i.modal,open:!0,onClose:function(){return t(!1)},closeAfterTransition:!0,BackdropComponent:Le.a,children:Object(r.jsxs)("div",{className:i["new-avatar"],children:[Object(r.jsx)(ce.a,{style:{width:"7rem",height:"7rem"},src:c}),Object(r.jsx)(Qe.a,{accept:"image/*",id:"contained-button-file",multiple:!0,type:"file",name:"avatar",value:g,inputRef:_,style:{marginTop:"1rem"},onChange:function(e){var t=e.target.files[0];if(!t.type)return v(""),d(""),void p({isError:!0,text:"\u041e\u0448\u0438\u0431\u043a\u0430, \u044d\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u0432\u0430\u0448\u0435\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 !"});if(!t.type.match("image.*"))return v(""),d(""),void p({isError:!0,text:"\u0412\u044b\u0431\u0440\u0430\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u043d\u0435 \u0435\u0441\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u043c !"});p({isError:!1,text:""}),v(e.target.file);var n=new FileReader;n.addEventListener("load",(function(e){d(e.target.result)})),n.readAsDataURL(t)}}),m.isError&&Object(r.jsx)("div",{className:i["new-avatar__file-error"],children:m.text}),Object(r.jsx)(h.a,{className:i["new-avatar__load-btn"],onClick:y,variant:"contained",color:"primary",children:"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]})})},dt=function(e){return e.subscribers.subscription},bt=function(e){return e.subscribers.recommended},jt=function(e){return e.subscribers.isLoading},mt=Object(O.a)((function(e){return{profile:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},profile__info:{display:"flex",alignItems:"center",textDecoration:"none",color:"inherit"},profile__avatar:{width:"4rem",height:"4rem","&:hover":{cursor:"pointer"}},profile__name:{marginLeft:"1rem",fontWeight:"bold","&:hover":{cursor:"pointer"}},"profile__sbsc-btn":{fontSize:".8rem",margin:"0 1rem .2rem 0",textTransform:"none",color:function(t){return"subscription"===t.type?"":e.colors.main},"&:hover":{background:"none"}},"profile__logout-btn":{minWidth:"5rem",minHeight:"2rem"}}})),pt=function(e){var t=e.type,n=e.isOwn,i=e.avatarClass,s=e.isLoading,o=e.isPageComp,c=void 0!==o&&o,l=e.avatar,u=void 0===l?"":l,d=e.login,b=void 0===d?"andrew":d,j=Object(D.b)(),m=F(),p=m.request,O=m.loading,x=Object(a.useState)(!1),g=Object(f.a)(x,2),v=g[0],w=g[1],_=Object(D.c)(it),y="subscription"===t?"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f":"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",k=mt({type:t,isOwn:n});return Object(r.jsxs)("div",{className:k.profile,children:[c?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:k.profile__info,children:[Object(r.jsx)(ce.a,{className:i||k.profile__avatar,src:"/"+u}),Object(r.jsx)("div",{className:k.profile__name,children:b})]}),n&&Object(r.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){return w(!0)},disabled:O,className:k["profile__logout-btn"],children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"})]}):Object(r.jsxs)(be.b,{to:"profile/"+b,className:k.profile__info,children:[Object(r.jsx)(ce.a,{alt:"Avatar",className:i||k.profile__avatar,src:u}),Object(r.jsx)("div",{className:k.profile__name,children:b})]}),n?Object(r.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){p("/auth/logout").then((function(e){e.success&&j({type:B})}))},disabled:O,className:k["profile__logout-btn"],children:"\u0412\u044b\u0439\u0442\u0438"}):Object(r.jsx)(h.a,{disableRipple:!0,disabled:s,onClick:function(){j(Z()),p("/user/subs","post",{login:b,avatar:u,type:t,userLogin:_.login}).then((function(e){e.success&&j({type:G,payload:{login:b,type:t}})})).finally((function(){j(Z())}))},className:k["profile__sbsc-btn"],children:y}),v&&Object(r.jsx)(ut,{login:b,open:w})]})},ft=Object(O.a)((function(e,t){return{"subscribe-section":{marginTop:function(e){return"recommended"===e.type?"2rem":0},border:"1px solid rgb(219, 219, 219)",backgroundColor:"2px solid black",borderRadius:"3px",padding:"1rem 0 1rem 1rem",boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)"},"subscribe-section__list":{marginTop:"1rem",overflowX:"hidden",maxHeight:"200px",fontSize:"1rem","& div":{marginBottom:".5rem"}},"subscribe-section__no-subs-text":{textAlign:"center",fontWeight:"bold",padding:"1rem 1rem 0 0"},"subscribe-section__profile":{width:"3rem",height:"3rem"}}})),Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.type,n=e.subscribers,a=void 0===n?[]:n,i=ft({type:t}),s=Object(D.c)(jt);return Object(r.jsxs)("div",{className:i["subscribe-section"],children:[Object(r.jsx)("span",{children:"subscription"===t?"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0438":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u0432\u0430\u0441"}),Object(r.jsxs)("div",{className:i["subscribe-section__list"],children:[a.map((function(e,n){return Object(r.jsx)(pt,{type:t,avatar:e.avatar,isLoading:s,avatarClass:i["subscribe-section__profile"],login:e.login},n)})),!a.length&&Object(r.jsx)("div",{className:i["subscribe-section__no-subs-text"],children:"subscription"===t?"\u041f\u043e\u0434\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0430 \u043d\u0435\u0442":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0439 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442\u0443"})]})]})},xt=Object(O.a)((function(e){return{"subscribe-section":{marginTop:"2rem"}}})),ht=function(){var e=xt(),t=Object(D.c)(dt),n=Object(D.c)(bt);return Object(r.jsxs)("section",{className:e["subscribe-section"],children:[Object(r.jsx)(Ot,{subscribers:t,type:"subscription"}),Object(r.jsx)(Ot,{subscribers:n,type:"recommended"})]})},gt=Object(O.a)((function(){return{"profile-info":{padding:".5rem"}}})),vt=function(){var e=Object(D.c)(it),t=gt();return Object(r.jsxs)("div",{className:t["profile-info"],children:[Object(r.jsx)(pt,{isOwn:!0,avatar:e.avatar,login:e.login}),Object(r.jsx)(ht,{})]})},wt=(n(145),function(){return Object(r.jsx)("div",{id:"cube-loader",children:Object(r.jsx)("div",{className:"caption",children:Object(r.jsxs)("div",{className:"cube-loader",children:[Object(r.jsx)("div",{className:"cube loader-1"}),Object(r.jsx)("div",{className:"cube loader-2"}),Object(r.jsx)("div",{className:"cube loader-4"}),Object(r.jsx)("div",{className:"cube loader-3"})]})})})}),_t=Object(O.a)((function(e){return{main:{width:"100%",height:"auto",minHeight:"97vh",boxSizing:"border-box",display:"flex",flexDirection:"column-reverse",justifyContent:"center",alignItems:"center",paddingTop:"4rem"},main__posts:{width:"100%"},"main__profile-info":{width:"100%"},"@media (min-width: 600px)":{main:{flexDirection:"row",alignItems:"flex-start"},main__posts:{width:"40%",maxWidth:"700px"},"main__profile-info":{width:"20%",marginLeft:"2rem",position:"sticky",top:"calc(4rem + 10px)",minWidth:"300px"}}}})),yt=function(){var e=_t(),t=F().request,n=Object(D.c)(qe),i=Object(D.b)(),s=Object(D.c)(it);return Object(a.useEffect)((function(){i(Ce()),t("/posts/all","post",{login:s.login}).then((function(e){var t,n;i((t=e.posts,n=s.login,{type:we,payload:{posts:t,login:n}})),i(Ce())}))}),[]),Object(r.jsx)(r.Fragment,{children:n?Object(r.jsx)(wt,{}):Object(r.jsxs)("div",{className:e.main,children:[Object(r.jsx)("div",{className:e.main__posts,children:Object(r.jsx)(ct,{})}),Object(r.jsx)("div",{className:e["main__profile-info"],children:Object(r.jsx)(vt,{})})]})})},kt=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},Nt=Object(O.a)((function(e){return{"forgot-form":{minWidth:"300px",maxWidth:"500px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"forgot-form__title":{marginBottom:"2rem"},"forgot-form__action":{marginTop:"1.5rem",minWidth:"200px"},"forgot-form__resp":{marginTop:"1rem",textAlign:"center",fontSize:"1.2rem"},"forgot-form__resp-success":{color:e.colors.success},"forgot-form__resp-error":{color:e.colors.error}}})),Ct=function(e){var t=e.setIsAppear,n=Object(a.useState)(""),i=Object(f.a)(n,2),s=i[0],o=i[1],c=Object(a.useState)(!1),d=Object(f.a)(c,2),b=d[0],j=d[1],m=Object(a.useState)(""),p=Object(f.a)(m,2),O=p[0],x=p[1],v=Object(a.useState)({ready:!1,success:!1,errorText:""}),w=Object(f.a)(v,2),_=w[0],y=w[1],k=F(),N=k.loading,C=k.request,S=Nt(),L=Object(g.g)(),T=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),kt(s)){e.next=8;break}return j(!0),x("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"),e.abrupt("return");case 8:return b&&(x(""),j(!1)),e.next=11,C("/auth/reset","post",{email:s});case 11:if(!e.sent.success){e.next=17;break}o(""),y({ready:!0,success:!0,errorText:""}),e.next=18;break;case 17:throw new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0436\u0435");case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),y({ready:!0,success:!1,errorText:e.t0.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0436\u0435"});case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("form",{className:S["forgot-form"],children:[Object(r.jsx)("div",{className:S["forgot-form__title"],children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 email"}),Object(r.jsx)(R.a,{error:b,id:"filled-error-helper-text9",label:"Email",onChange:function(e){b&&(x(""),j(!1)),o(e.target.value)},helperText:O,variant:"filled",name:"email",value:s}),Object(r.jsx)("div",{className:S["forgot-form__resp"],children:_.ready&&(_.success?Object(r.jsx)("div",{className:S["forgot-form__resp-success"],children:"\u041d\u0430 \u0432\u0430\u0448\u0443 \u043f\u043e\u0447\u0442\u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u0438\u0441\u044c\u043c\u043e \u0441 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0435\u0439. \u0415\u0441\u043b\u0438 \u043f\u0438\u0441\u044c\u043c\u0430 \u043d\u0435\u0442\u0443 \u2013 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u043f\u0430\u043c"}):Object(r.jsx)("div",{className:S["forgot-form__resp-error"],children:_.errorText}))}),Object(r.jsx)(h.a,{onClick:T,className:S["forgot-form__action"],disabled:N,type:"submit",variant:"contained",color:"primary",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u0438\u0441\u044c\u043c\u043e"}),Object(r.jsx)(h.a,{onClick:function(){t(!1),setTimeout((function(){L.push("/auth")}),500)},className:S["forgot-form__action"],disabled:N,variant:"contained",color:"primary",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})},St=Object(O.a)((function(e){return{"forgot-page":{width:"100%",height:"50vh",fontSize:"1.5rem",paddingTop:"4rem"}}})),Lt=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],i=t[1],s=St();return Object(a.useEffect)((function(){i(!0)}),[]),Object(r.jsx)(Y.a,{in:n,timeout:{enter:1e3,exit:500},children:Object(r.jsx)("div",{className:s["forgot-page"],children:Object(r.jsx)(Ct,{setIsAppear:i})})})},Tt=Object(O.a)((function(e){return{"reset-form":{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",maxWidth:"500px",margin:"0 auto"},"reset-form__input":{marginBottom:"1rem",minWidth:"250px"},"reset-form__title":{marginBottom:"2rem"},"reset-form__action":{marginTop:"2rem"},"reset-form__resp":{fontSize:"1.2rem"},"reset-form__resp-success":{color:e.colors.success},"reset-form__resp-error":{color:e.colors.error}}})),Pt=function(e){var t=e.token,n=Object(a.useState)({password:"",rePassword:""}),i=Object(f.a)(n,2),s=i[0],o=i[1],c=Object(a.useState)({password:!1,rePassword:!1}),l=Object(f.a)(c,2),u=l[0],d=l[1],b=Object(a.useState)({password:"",rePassword:""}),j=Object(f.a)(b,2),m=j[0],O=j[1],x=Object(a.useState)({isError:!1,errorText:""}),v=Object(f.a)(x,2),w=v[0],_=v[1],y=Object(a.useState)(!1),k=Object(f.a)(y,2),N=k[0],C=k[1],S=Tt(),L=Object(g.g)(),T=F(),P=T.loading,E=T.request,A=function(e){var t=e.target;"password"===t.name&&(t.value.length<7?(d((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:!0})})),O((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 7 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})}))):(d((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:!1})})),O((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:""})})))),"rePassword"===t.name&&(s.password!==t.value?(d((function(e){return Object(p.a)(Object(p.a)({},e),{},{rePassword:!0})})),O((function(e){return Object(p.a)(Object(p.a)({},e),{},{rePassword:"\u041f\u0430\u0440\u043e\u043b\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c"})}))):(d((function(e){return Object(p.a)(Object(p.a)({},e),{},{rePassword:!1})})),O((function(e){return Object(p.a)(Object(p.a)({},e),{},{rePassword:""})})))),o((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(I.a)({},t.name,t.value))}))};return Object(r.jsxs)("form",{className:S["reset-form"],children:[Object(r.jsx)("div",{className:S["reset-form__title"],children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(r.jsx)(R.a,{className:S["reset-form__input"],error:u.password,type:"password",id:"filled-error-helper-text23",label:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:A,helperText:m.password,variant:"filled",name:"password",value:s.password}),Object(r.jsx)(R.a,{className:S["reset-form__input"],error:u.rePassword,type:"password",id:"filled-error-helper-text44",label:"\u041f\u0430\u0440\u043e\u043b\u044c \u0435\u0449\u0451 \u0440\u0430\u0437",onChange:A,helperText:m.rePassword,variant:"filled",name:"rePassword",value:s.rePassword}),Object(r.jsxs)("div",{className:S["reset-form__resp"],children:[N&&w.isError&&Object(r.jsx)("div",{className:S["reset-form__resp-error"],children:w.errorText}),N&&!w.isError&&Object(r.jsx)("div",{className:S["reset-form__resp-success"],children:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})]}),Object(r.jsx)(h.a,{onClick:function(e){return e.preventDefault(),s.password.length<7?(d((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:!0})})),void O((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 7 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})}))):s.password!==s.rePassword?(d((function(e){return Object(p.a)(Object(p.a)({},e),{},{rePassword:!0})})),void O((function(e){return Object(p.a)(Object(p.a)({},e),{},{rePassword:"\u041f\u0430\u0440\u043e\u043b\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c"})}))):void E("/auth/reset/password","post",Object.assign(s,{token:t})).then((function(e){e.success&&(_({isError:!1,errorText:""}),o({password:"",rePassword:""}))})).catch((function(e){return _({isError:!0,errorText:e.message||e})})).finally((function(){return C(!0)}))},className:S["reset-form__action"],disabled:P,type:"submit",variant:"contained",color:"primary",children:"\u0418\u0437\u043ce\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}),N&&!w.isError&&Object(r.jsx)(h.a,{onClick:function(){return L.push("/auth")},className:S["reset-form__action"],disabled:P,type:"submit",variant:"contained",color:"primary",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})},Et=Object(O.a)((function(e){return{"reset-page":{width:"100%",height:"50vh",fontSize:"1.5rem",paddingTop:"6rem"}}})),At=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],i=t[1],s=F(),o=s.loading,c=s.request,l=Object(g.h)().token,u=Object(g.g)(),d=Et();return Object(a.useEffect)((function(){c("/auth/reset/check","post",{token:l}).then((function(e){e.success?i(!0):u.push("/auth")}))}),[]),Object(r.jsxs)("div",{className:d["reset-page"],children:[o&&Object(r.jsx)(wt,{}),n&&Object(r.jsx)(Pt,{token:l})]})},It=n(41),Rt=Object(O.a)((function(e){return{"profile-info":{paddingLeft:"10rem",display:"flex",justifyContent:"flex-start",alignItems:"center"},"profile-loading":{display:"flex",width:"100%",alignItems:"center",justifyContent:"flex-start"}}})),Wt=function(e){var t=e.isLoading,n=e.isOwn,a=e.user,i=Rt(),s=Object(D.c)(bt),o=Object(D.c)(jt),c=s.find((function(e){return e.login===a.login}))?"recommended":"subscription";return Object(r.jsxs)("div",{className:i["profile-info"],children:[!t&&Object(r.jsx)(pt,{type:n?"":c,isLoading:o,login:a.login,avatar:a.avatar||"",isPageComp:!0,isOwn:n}),t&&Object(r.jsxs)("div",{className:i["profile-loading"],children:[Object(r.jsx)(ie.a,{animation:"wave",variant:"circle",height:"5rem",width:"5rem"}),Object(r.jsx)(ie.a,{animation:"wave",variant:"text",height:"4vh",width:"30%",style:{marginLeft:"2rem"}})]})]})},Ft=Object(O.a)((function(e){return{"profile-post":{height:"20rem",overflowY:"hidden",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},"profile-post__img":{width:"100%",height:"auto"}}})),Dt=function(e){var t=e.isLoading,n=void 0!==t&&t,a=e.open,i=e.isLiked,s=e.imgSrc,o=e.info,c=e.comments,l=e.avatar,u=e.ownerLogin,d=e.likes,b=e.id,j=Ft();return Object(r.jsx)(r.Fragment,{children:n?Object(r.jsx)("div",{children:Object(r.jsx)(ie.a,{animation:"wave",variant:"rect",style:{width:"20rem",height:"20rem"}})}):Object(r.jsx)("div",{className:j["profile-post"],onClick:function(){return a({imgSrc:s,comments:c,avatar:l,text:o,ownerLogin:u,likes:d,id:b,isLiked:i})},children:Object(r.jsx)("img",{className:j["profile-post__img"],src:"/"+s,alt:"post-image"})})})},zt=Object(O.a)((function(e){return{profile__posts:{display:"grid",marginTop:"2rem",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",gridColumnGap:"2rem",gridRowGap:"2rem"},modal:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",overflowY:"visible",position:"absolute"},"profile__modal-post":{width:"50%",height:"auto",outline:"none",position:"relative"},"profile__posts-exist":{textAlign:"center",marginTop:"2rem",fontWeight:"bold",fontSize:"2rem",gridColumnStart:1,gridColumnEnd:5,gridRowStart:2,gridRowEnd:3}}})),Bt=function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),i=n[0],s=n[1],o=Object(a.useState)(!1),c=Object(f.a)(o,2),l=c[0],u=c[1],d=zt(),b=e.user,j=e.isLoading,m=Object(D.c)(He),p=(Object(D.c)(Ze),function(){s(!1)}),O=function(e){u(e),s(!0)};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:d.profile__posts,children:[!j&&m.map((function(e){return Object(r.jsx)(Dt,{id:e._id,avatar:b.avatar,imgSrc:e.imageSrc,info:e.info,isLiked:e.isLiked,comments:e.comments,likes:e.likes,ownerLogin:e.ownerLogin,open:O},e._id)})),!j&&!m.length&&Object(r.jsx)("div",{className:d["profile__posts-exist"],children:"\u041f\u043e\u0441\u0442\u043e\u0432 \u043d\u0435\u0442\u0443"}),j&&[1,2,3,4,5,6].map((function(e,t){return Object(r.jsx)(Dt,{isLoading:!0},t)}))]}),i&&Object(r.jsx)(Se.a,{disableAutoFocus:!0,disableEnforceFocus:!0,className:d.modal,open:i,onClose:p,closeAfterTransition:!0,BackdropComponent:Le.a,children:Object(r.jsx)("div",{className:d["profile__modal-post"],children:Object(r.jsx)(ot,{isUserPost:!0,handleClose:p,setModalInfo:u,info:l})})})]})},Ut=Object(O.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Montserrat"},"new-post":{fontFamily:"Montserrat",minWidth:"500px",boxSizing:"border-box",backgroundColor:"white",borderRadius:"10px",boxShadow:e.shadows[5],position:"relative",padding:"3rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","&:focus":{outline:"none"}},"new-post__title":{marginBottom:"1rem",fontWeight:"bold",fontSize:"1.5rem"},"new-post__close-btn":{position:"absolute",top:"1.5rem",right:"1.5rem"},"new-post__info":{alignSelf:"flex-start",width:"100%"},"new-post__load-btn":{marginTop:"1rem"},"new-post__input-file":{width:"100%",marginBottom:"2rem"},"new-post__input-title":{fontSize:"1.2rem",marginBottom:"1rem"},"new-post__error":{color:e.colors.error,fontWeight:"bold",marginTop:"1rem"}}})),Gt=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(""),o=Object(f.a)(s,2),c=o[0],d=o[1],b=Object(a.useState)(!1),j=Object(f.a)(b,2),m=j[0],p=j[1],O=Ut(),x=Object(a.useRef)(),g=Object(D.b)(),v=function(){i(!1)},w=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x.current.files[0]){e.next=4;break}return p(!0),e.abrupt("return");case 4:return m&&p(!1),(t=new FormData).append("avatar",x.current.files[0]),t.set("user","andrew"),t.set("info",c),e.next=11,fetch("/post/new",{method:"post",body:t});case 11:return n=e.sent,e.next=14,n.json();case 14:(r=e.sent).post&&(g((a=r.post,{type:ge,payload:a})),i(!1),d("")),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(0);case 20:case"end":return e.stop()}var a}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{style:{textAlign:"center",marginTop:"1rem"},children:[Object(r.jsx)(h.a,{onClick:function(){i(!0)},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"}),Object(r.jsx)(Se.a,{disableAutoFocus:!0,disableEnforceFocus:!0,className:O.modal,open:n,onClose:v,closeAfterTransition:!0,BackdropComponent:Le.a,children:Object(r.jsxs)("div",{className:O["new-post"],children:[Object(r.jsx)(Pe.a,{onClick:v,className:O["new-post__close-btn"]}),Object(r.jsx)("div",{className:O["new-post__title"],children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430"}),Object(r.jsx)("div",{className:O["new-post__input-title"],children:"\u0424\u043e\u0442\u043e \u043f\u043e\u0441\u0442\u0430"}),Object(r.jsx)(Qe.a,{accept:"image/*",id:"contained-button-file",multiple:!0,className:O["new-post__input-file"],type:"file",name:"avatar",inputRef:x}),Object(r.jsx)("div",{className:O["new-post__input-title"],children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u043e\u0441\u0442\u0435"}),Object(r.jsx)(R.a,{className:O["new-post__info"],id:"standard-textarea",placeholder:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",multiline:!0,onChange:function(e){d(e.target.value)},value:c}),m&&Object(r.jsx)("div",{className:O["new-post__error"],children:"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u043e\u0442\u043e"}),Object(r.jsx)(h.a,{className:O["new-post__load-btn"],variant:"contained",color:"primary",onClick:w,children:"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]})})]})},Mt=Object(O.a)((function(e){return{"profile-page":{padding:"4rem 2rem 0",margin:"0 auto"}}})),qt=function(){var e=Mt(),t=F(),n=t.request,i=t.loading,s=Object(g.h)().login,o=Object(D.b)(),c=Object(D.c)(it),l=[].concat(Object(It.a)(Object(D.c)(bt)),Object(It.a)(Object(D.c)(dt))).filter((function(e){return e.login===s}))[0],u=s===c.login;return Object(a.useEffect)((function(){u||o(ye([])),n("/posts/users","post",{login:s}).then((function(e){return o(ye(e,c.login))}))}),[s]),Object(r.jsxs)("div",{className:e["profile-page"],children:[Object(r.jsx)(Wt,{user:u?c:l,isOwn:u,isLoading:i}),u&&Object(r.jsx)(Gt,{isLoading:i}),Object(r.jsx)(Bt,{user:u?c:l,isLoading:i})]})},Ht=function(e){var t=e.exact,n=e.path,a=e.component;return Object(D.c)(at)?Object(r.jsx)(g.b,{exact:t,path:n,component:a}):Object(r.jsx)(g.a,{to:"/auth"})},Zt=function(){return Object(r.jsxs)(g.d,{children:[Object(r.jsx)(g.b,{exact:!0,path:"/",component:y}),Object(r.jsx)(g.b,{exact:!0,path:"/auth",component:ae}),Object(r.jsx)(g.b,{exact:!0,path:"/auth/reset",component:Lt}),Object(r.jsx)(g.b,{exact:!0,path:"/auth/reset/:token",component:At}),Object(r.jsx)(Ht,{exact:!0,path:"/app",component:yt}),Object(r.jsx)(Ht,{exact:!0,path:"/profile/:login",component:qt})]})};var $t=function(){return Object(a.useEffect)((function(){!function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/csrf");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(r.jsx)(m,{children:Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(Zt,{})})})},Jt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,205)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))},Kt=n(48),Xt={posts:[],userPosts:[],isLoadingAllPosts:!1,isLoadedUserPosts:!1,isLikedPost:!1,isCommentPost:!1},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:var n=t.payload,r=n.posts,a=n.login,i=r.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{isLiked:!!e.likes.find((function(e){return e.owner===a}))})}));return Object(p.a)(Object(p.a)({},e),{},{posts:i});case ve:return Object(p.a)(Object(p.a)({},e),{},{isLoadingAllPosts:!e.isLoadingAllPosts});case pe:var s=t.payload,o=s.id,c=s.likeOwner,l=s.isUserPost,u=void 0!==l&&l,d=!0===u?"userPosts":"posts",b=e[d].find((function(e){return e._id===o})),j=b.likes.findIndex((function(e){return e.owner.toString()===c.toString()}));return-1!==j?b.likes.splice(j,1):b.likes.push({owner:c}),b.isLiked=!b.isLiked,Object(p.a)(Object(p.a)({},e),{},Object(I.a)({},d,Object(It.a)(e[d])));case fe:return Object(p.a)(Object(p.a)({},e),{},{isLikedPost:!e.isLikedPost});case Oe:return Object(p.a)(Object(p.a)({},e),{},{isCommentPost:!e.isCommentPost});case xe:var m=t.payload,f=m.isUserPost,O=void 0!==f&&f,x=m.postId,h=m.comment,g=!0===O?"userPosts":"posts",v=e[g].find((function(e){return e._id===x}));return v.comments.push(h),Object(p.a)(Object(p.a)({},e),{},{posts:Object(It.a)(e.posts)});case he:var w=t.payload,_=w.posts,y=w.login,k=_.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{isLiked:!!e.likes.find((function(e){return e.owner===y}))})}));return Object(p.a)(Object(p.a)({},e),{},{userPosts:k,isLoadedUserPosts:!0});case ge:return e.userPosts.push(t.payload),Object(p.a)(Object(p.a)({},e),{},{userPosts:Object(It.a)(e.userPosts)})}return e},Vt={subscription:[],recommended:[],isLoading:!1},Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:var n,r=t.payload,a=r.login,i=r.type,s="subscription"===i?"recommended":"subscription",o=e[i].find((function(e){return e.login===a})),c=e[i].filter((function(e){return e.login!==a})),l=[o].concat(Object(It.a)(e[s]));return Object(p.a)(Object(p.a)({},e),{},(n={},Object(I.a)(n,s,l),Object(I.a)(n,i,c),n));case M:return Object(p.a)(Object(p.a)({},e),{},{subscription:t.payload});case q:return Object(p.a)(Object(p.a)({},e),{},{recommended:t.payload});case H:return Object(p.a)(Object(p.a)({},e),{},{isLoading:!e.isLoading})}return e},en={isAuth:!1,isLoadingInfo:!0},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(p.a)(Object(p.a)({},e),{},{isAuth:!0},t.payload);case B:return{isAuth:!1};case U:return Object(p.a)(Object(p.a)({},e),{},{userInfo:Object(p.a)(Object(p.a)({},e.userInfo),{},{avatar:t.payload})})}return e},nn=Object(Kt.c)({posts:Yt,subscribers:Qt,user:tn}),rn=n(103),an=Object(Kt.d)(nn,Object(Kt.a)(rn.a));o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(D.a,{store:an,children:Object(r.jsx)(be.a,{children:Object(r.jsx)($t,{})})})}),document.getElementById("root")),Jt()}},[[146,1,2]]]);
//# sourceMappingURL=main.dcd42fa1.chunk.js.map